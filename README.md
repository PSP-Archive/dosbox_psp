This is a port of DOSBox for the PlayStation Portable.

# Make sure to check out the [project's wiki](https://github.com/pierrelouys/dosbox_psp/wiki)!

## Instructions for building

- Install the [psp toolchain](https://github.com/pspdev/psptoolchain)

- Enter the following in Terminal:
```
./autogen.sh
```

- Configure with this command

```sh
SDL_CONFIG="$(PSPDEV)/bin/sdl-config" CXXFLAGS="-I${PSPDEV}/psp/sdk/include -I${PSPDEV}/psp/include/SDL -O2 -G0" LDFLAGS="-L${PSPDEV}/psp/sdk/lib -L  ${PSPDEV}/psp/lib -lc -lpspuser -lpspkernel" CFLAGS="-I${PSPDEV}/psp/sdk/include" ./configure -host=psp
```
- Remove the autogenerated `config.h` and replace it with `config.bak.h` .

- Run `make`, it will fail to link with this -lpthread error,
```
/usr/psp/lib/gcc/psp/9.3.0/../../../../psp/bin/ld: cannot find -lpthread
```
this is expected.

- `cd src`

- Link with this command
```sh 
psp-gcc -L${PSPDEV}/psp/sdk/lib -o dosbox dosbox.o p_sprint.o ftruncate.o cpu/libcpu.a debug/libdebug.a dos/libdos.a fpu/libfpu.a hardware/libhardware.a gui/libgui.a ints/libints.a misc/libmisc.a shell/libshell.a -lm hardware/serialport/libserial.a -lpspdebug -lpspgu -lpspctrl -lpspdisplay -lpspge -lpspsdk -lpsprtc -lpspaudio -lstdc++ -lpspirkeyb -lc -lpspnet -lpspnet_inet -lpsppower -lpsputility -lpspuser -lpspkernel -specs=${PSPDEV}/psp/sdk/lib/prxspecs -Wl,-T${PSPDEV}/psp/sdk/lib/linkfile.prx,-q && psp-fixup-imports dosbox && psp-prxgen dosbox dosbox.prx && mksfoex -d MEMSIZE=1 "DOSBox PSP" PARAM.SFO && pack-pbp EBOOT.PBP PARAM.SFO ICON0.PNG NULL NULL PIC1.PNG NULL dosbox.prx NULL
```
